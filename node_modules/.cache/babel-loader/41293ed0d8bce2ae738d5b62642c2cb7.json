{"ast":null,"code":"var _jsxFileName = \"/Volumes/Transcend/react/my-portfolio/src/d3/PieChart.js\",\n    _s2 = $RefreshSig$();\n\nimport { useD3 } from \"../hooks/useD3\";\nimport React from \"react\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst margin = {\n  top: 50,\n  right: 50,\n  bottom: 50,\n  left: 50\n};\n\nfunction PieChart(_ref) {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  let {\n    data\n  } = _ref;\n\n  const ref = _s(useD3(_s(svg => {\n    _s();\n\n    const {\n      data,\n      outerRadius,\n      innerRadius\n    } = props;\n    const width = 2 * outerRadius + margin.left + margin.right;\n    const height = 2 * outerRadius + margin.top + margin.bottom;\n    const colorScale = d3.scaleSequential().interpolator(d3.interpolateCool).domain([0, data.length]);\n    useEffect(() => {\n      drawChart();\n    }, [data]);\n\n    function drawChart() {\n      // Remove the old svg\n      d3.select(\"#pie-container\").select(\"svg\").remove(); // Create new svg\n\n      const svg = d3.select(\"#pie-container\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n      const arcGenerator = d3.arc().innerRadius(innerRadius).outerRadius(outerRadius);\n      const pieGenerator = d3.pie().padAngle(0).value(d => d.value);\n      const arc = svg.selectAll().data(pieGenerator(data)).enter(); // Append arcs\n\n      arc.append(\"path\").attr(\"d\", arcGenerator).style(\"fill\", (_, i) => colorScale(i)).style(\"stroke\", \"#ffffff\").style(\"stroke-width\", 0); // Append text labels\n\n      arc.append(\"text\").attr(\"text-anchor\", \"middle\").attr(\"alignment-baseline\", \"middle\").text(d => d.data.label).style(\"fill\", (_, i) => colorScale(data.length - i)).attr(\"transform\", d => {\n        const [x, y] = arcGenerator.centroid(d);\n        return `translate(${x}, ${y})`;\n      });\n    }\n  }, \"OD7bBpZva5O2jO+Puf00hKivP7c=\")), \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\"return \", /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"pie-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 14\n    }, this), \";\"]\n  }, void 0, true);\n}\n\n_s2(PieChart, \"r127xTdrGuIqcYXTmMbvPxoKAyo=\", false, function () {\n  return [useD3];\n});\n\n_c = PieChart;\nexport default PieChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"PieChart\");","map":{"version":3,"sources":["/Volumes/Transcend/react/my-portfolio/src/d3/PieChart.js"],"names":["useD3","React","d3","margin","top","right","bottom","left","PieChart","data","ref","svg","outerRadius","innerRadius","props","width","height","colorScale","scaleSequential","interpolator","interpolateCool","domain","length","useEffect","drawChart","select","remove","append","attr","arcGenerator","arc","pieGenerator","pie","padAngle","value","d","selectAll","enter","style","_","i","text","label","x","y","centroid"],"mappings":";;;AAAA,SAASA,KAAT,QAAsB,gBAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;;;AAEA,MAAMC,MAAM,GAAG;AACbC,EAAAA,GAAG,EAAE,EADQ;AAEbC,EAAAA,KAAK,EAAE,EAFM;AAGbC,EAAAA,MAAM,EAAE,EAHK;AAIbC,EAAAA,IAAI,EAAE;AAJO,CAAf;;AAOA,SAASC,QAAT,OAA4B;AAAA;;AAAA;;AAAA,MAAV;AAAEC,IAAAA;AAAF,GAAU;;AAC1B,QAAMC,GAAG,MAAGV,KAAK,IAAEW,GAAD,IAAS;AAAA;;AACzB,UAAM;AAAEF,MAAAA,IAAF;AAAQG,MAAAA,WAAR;AAAqBC,MAAAA;AAArB,QAAqCC,KAA3C;AACA,UAAMC,KAAK,GAAG,IAAIH,WAAJ,GAAkBT,MAAM,CAACI,IAAzB,GAAgCJ,MAAM,CAACE,KAArD;AACA,UAAMW,MAAM,GAAG,IAAIJ,WAAJ,GAAkBT,MAAM,CAACC,GAAzB,GAA+BD,MAAM,CAACG,MAArD;AAEA,UAAMW,UAAU,GAAGf,EAAE,CAClBgB,eADgB,GAEhBC,YAFgB,CAEHjB,EAAE,CAACkB,eAFA,EAGhBC,MAHgB,CAGT,CAAC,CAAD,EAAIZ,IAAI,CAACa,MAAT,CAHS,CAAnB;AAKAC,IAAAA,SAAS,CAAC,MAAM;AACdC,MAAAA,SAAS;AACV,KAFQ,EAEN,CAACf,IAAD,CAFM,CAAT;;AAGA,aAASe,SAAT,GAAqB;AACnB;AACAtB,MAAAA,EAAE,CAACuB,MAAH,CAAU,gBAAV,EAA4BA,MAA5B,CAAmC,KAAnC,EAA0CC,MAA1C,GAFmB,CAInB;;AACA,YAAMf,GAAG,GAAGT,EAAE,CACXuB,MADS,CACF,gBADE,EAETE,MAFS,CAEF,KAFE,EAGTC,IAHS,CAGJ,OAHI,EAGKb,KAHL,EAITa,IAJS,CAIJ,QAJI,EAIMZ,MAJN,EAKTW,MALS,CAKF,GALE,EAMTC,IANS,CAMJ,WANI,EAMU,aAAYb,KAAK,GAAG,CAAE,KAAIC,MAAM,GAAG,CAAE,GAN/C,CAAZ;AAQA,YAAMa,YAAY,GAAG3B,EAAE,CACpB4B,GADkB,GAElBjB,WAFkB,CAENA,WAFM,EAGlBD,WAHkB,CAGNA,WAHM,CAArB;AAKA,YAAMmB,YAAY,GAAG7B,EAAE,CACpB8B,GADkB,GAElBC,QAFkB,CAET,CAFS,EAGlBC,KAHkB,CAGXC,CAAD,IAAOA,CAAC,CAACD,KAHG,CAArB;AAKA,YAAMJ,GAAG,GAAGnB,GAAG,CAACyB,SAAJ,GAAgB3B,IAAhB,CAAqBsB,YAAY,CAACtB,IAAD,CAAjC,EAAyC4B,KAAzC,EAAZ,CAvBmB,CAyBnB;;AACAP,MAAAA,GAAG,CACAH,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,GAFR,EAEaC,YAFb,EAGGS,KAHH,CAGS,MAHT,EAGiB,CAACC,CAAD,EAAIC,CAAJ,KAAUvB,UAAU,CAACuB,CAAD,CAHrC,EAIGF,KAJH,CAIS,QAJT,EAImB,SAJnB,EAKGA,KALH,CAKS,cALT,EAKyB,CALzB,EA1BmB,CAiCnB;;AACAR,MAAAA,GAAG,CACAH,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,aAFR,EAEuB,QAFvB,EAGGA,IAHH,CAGQ,oBAHR,EAG8B,QAH9B,EAIGa,IAJH,CAISN,CAAD,IAAOA,CAAC,CAAC1B,IAAF,CAAOiC,KAJtB,EAKGJ,KALH,CAKS,MALT,EAKiB,CAACC,CAAD,EAAIC,CAAJ,KAAUvB,UAAU,CAACR,IAAI,CAACa,MAAL,GAAckB,CAAf,CALrC,EAMGZ,IANH,CAMQ,WANR,EAMsBO,CAAD,IAAO;AACxB,cAAM,CAACQ,CAAD,EAAIC,CAAJ,IAASf,YAAY,CAACgB,QAAb,CAAsBV,CAAtB,CAAf;AACA,eAAQ,aAAYQ,CAAE,KAAIC,CAAE,GAA5B;AACD,OATH;AAUD;AACF,GA1DgB,kCAAR,iCAAT;;AA4DA,sBACE;AAAA,uCACS;AAAK,MAAA,EAAE,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA,YADT;AAAA,kBADF;AAKD;;IAlEQpC,Q;UACKR,K;;;KADLQ,Q;AAoET,eAAeA,QAAf","sourcesContent":["import { useD3 } from \"../hooks/useD3\";\nimport React from \"react\";\nimport * as d3 from \"d3\";\n\nconst margin = {\n  top: 50,\n  right: 50,\n  bottom: 50,\n  left: 50,\n};\n\nfunction PieChart({ data }) {\n  const ref = useD3((svg) => {\n    const { data, outerRadius, innerRadius } = props;\n    const width = 2 * outerRadius + margin.left + margin.right;\n    const height = 2 * outerRadius + margin.top + margin.bottom;\n\n    const colorScale = d3\n      .scaleSequential()\n      .interpolator(d3.interpolateCool)\n      .domain([0, data.length]);\n\n    useEffect(() => {\n      drawChart();\n    }, [data]);\n    function drawChart() {\n      // Remove the old svg\n      d3.select(\"#pie-container\").select(\"svg\").remove();\n\n      // Create new svg\n      const svg = d3\n        .select(\"#pie-container\")\n        .append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .append(\"g\")\n        .attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n\n      const arcGenerator = d3\n        .arc()\n        .innerRadius(innerRadius)\n        .outerRadius(outerRadius);\n\n      const pieGenerator = d3\n        .pie()\n        .padAngle(0)\n        .value((d) => d.value);\n\n      const arc = svg.selectAll().data(pieGenerator(data)).enter();\n\n      // Append arcs\n      arc\n        .append(\"path\")\n        .attr(\"d\", arcGenerator)\n        .style(\"fill\", (_, i) => colorScale(i))\n        .style(\"stroke\", \"#ffffff\")\n        .style(\"stroke-width\", 0);\n\n      // Append text labels\n      arc\n        .append(\"text\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"alignment-baseline\", \"middle\")\n        .text((d) => d.data.label)\n        .style(\"fill\", (_, i) => colorScale(data.length - i))\n        .attr(\"transform\", (d) => {\n          const [x, y] = arcGenerator.centroid(d);\n          return `translate(${x}, ${y})`;\n        });\n    }\n  });\n\n  return (\n    <>\n      return <div id=\"pie-container\" />;\n    </>\n  );\n}\n\nexport default PieChart;\n"]},"metadata":{},"sourceType":"module"}