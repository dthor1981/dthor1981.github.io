{"ast":null,"code":"var _jsxFileName = \"/Volumes/Transcend/react/my-portfolio/src/d3/AreaStackChart.js\",\n    _s = $RefreshSig$();\n\nimport { useD3 } from \"../hooks/useD3\";\nimport React from \"react\";\nimport * as d3 from \"d3\"; // set the dimensions and margins of the graph\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst margin = {\n  top: 10,\n  right: 30,\n  bottom: 30,\n  left: 60\n},\n      width = 460 - margin.left - margin.right,\n      height = 400 - margin.top - margin.bottom;\n\nfunction AreaStackChart(_ref) {\n  _s();\n\n  let {\n    data\n  } = _ref;\n  const ref = useD3(svg => {\n    console.log(ref); // set the dimensions and margins of the graph\n\n    svg.attr(\"preserveAspectRatio\", \"xMinYMin meet\").attr(\"viewBox\", `0 0 ${width} ${height}`).classed(\"svg-content\", true).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`); // group the data: one array for each value of the X axis.\n\n    const sumStat = d3.group(data, d => d.year); // Stack the data: each group will be represented on top of each other\n\n    const myGroups = [\"Helen\", \"Amanda\", \"Ashley\"]; // list of group names\n\n    const myGroup = [1, 2, 3]; // list of group names\n\n    const stackedData = d3.stack().keys(myGroup).value(function (d, key) {\n      return d[1][key].n;\n    })(sumStat); // Add X axis --> it is a date format\n\n    const x = d3.scaleLinear().domain(d3.extent(data, function (d) {\n      return d.year;\n    })).range([0, width]);\n    svg.append(\"g\").attr(\"transform\", `translate(0, ${height})`).call(d3.axisBottom(x).ticks(5)); // Add Y axis\n\n    const y = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return +d.n;\n    }) * 1.2]).range([height, 0]);\n    svg.append(\"g\").call(d3.axisLeft(y)); // color palette\n\n    const color = d3.scaleOrdinal().domain(myGroups).range([\"#e41a1c\", \"#377eb8\", \"#4daf4a\", \"#984ea3\", \"#ff7f00\", \"#ffff33\", \"#a65628\", \"#f781bf\", \"#999999\"]); // Show the areas\n\n    svg.selectAll(\"mylayers\").data(stackedData).join(\"path\").style(\"fill\", function (d) {\n      name = myGroups[d.key - 1];\n      return color(name);\n    }).attr(\"d\", d3.area().x(function (d, i) {\n      return x(d.data[0]);\n    }).y0(function (d) {\n      return y(d[0]);\n    }).y1(function (d) {\n      return y(d[1]);\n    }));\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      viewBox: `0 0 ${height} ${width}`,\n      preserveAspectRatio: \"xMinYMin meet\",\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(AreaStackChart, \"r127xTdrGuIqcYXTmMbvPxoKAyo=\", false, function () {\n  return [useD3];\n});\n\n_c = AreaStackChart;\nexport default AreaStackChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"AreaStackChart\");","map":{"version":3,"sources":["/Volumes/Transcend/react/my-portfolio/src/d3/AreaStackChart.js"],"names":["useD3","React","d3","margin","top","right","bottom","left","width","height","AreaStackChart","data","ref","svg","console","log","attr","classed","append","sumStat","group","d","year","myGroups","myGroup","stackedData","stack","keys","value","key","n","x","scaleLinear","domain","extent","range","call","axisBottom","ticks","y","max","axisLeft","color","scaleOrdinal","selectAll","join","style","name","area","i","y0","y1"],"mappings":"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","sourcesContent":["import { useD3 } from \"../hooks/useD3\";\nimport React from \"react\";\nimport * as d3 from \"d3\";\n\n// set the dimensions and margins of the graph\nconst margin = { top: 10, right: 30, bottom: 30, left: 60 },\n  width = 460 - margin.left - margin.right,\n  height = 400 - margin.top - margin.bottom;\n\nfunction AreaStackChart({ data }) {\n  const ref = useD3((svg) => {\n    console.log(ref);\n\n    // set the dimensions and margins of the graph\n    svg\n      .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .classed(\"svg-content\", true)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // group the data: one array for each value of the X axis.\n    const sumStat = d3.group(data, (d) => d.year);\n\n    // Stack the data: each group will be represented on top of each other\n    const myGroups = [\"Helen\", \"Amanda\", \"Ashley\"]; // list of group names\n    const myGroup = [1, 2, 3]; // list of group names\n    const stackedData = d3\n      .stack()\n      .keys(myGroup)\n      .value(function (d, key) {\n        return d[1][key].n;\n      })(sumStat);\n\n    // Add X axis --> it is a date format\n    const x = d3\n      .scaleLinear()\n      .domain(\n        d3.extent(data, function (d) {\n          return d.year;\n        })\n      )\n      .range([0, width]);\n    svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(d3.axisBottom(x).ticks(5));\n\n    // Add Y axis\n    const y = d3\n      .scaleLinear()\n      .domain([\n        0,\n        d3.max(data, function (d) {\n          return +d.n;\n        }) * 1.2,\n      ])\n      .range([height, 0]);\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    // color palette\n    const color = d3\n      .scaleOrdinal()\n      .domain(myGroups)\n      .range([\n        \"#e41a1c\",\n        \"#377eb8\",\n        \"#4daf4a\",\n        \"#984ea3\",\n        \"#ff7f00\",\n        \"#ffff33\",\n        \"#a65628\",\n        \"#f781bf\",\n        \"#999999\",\n      ]);\n\n    // Show the areas\n    svg\n      .selectAll(\"mylayers\")\n      .data(stackedData)\n      .join(\"path\")\n      .style(\"fill\", function (d) {\n        name = myGroups[d.key - 1];\n        return color(name);\n      })\n      .attr(\n        \"d\",\n        d3\n          .area()\n          .x(function (d, i) {\n            return x(d.data[0]);\n          })\n          .y0(function (d) {\n            return y(d[0]);\n          })\n          .y1(function (d) {\n            return y(d[1]);\n          })\n      );\n  });\n\n  return (\n    <>\n      <svg\n        viewBox={`0 0 ${height} ${width}`}\n        preserveAspectRatio=\"xMinYMin meet\"\n        ref={ref}\n      ></svg>\n    </>\n  );\n}\n\nexport default AreaStackChart;\n"]},"metadata":{},"sourceType":"module"}